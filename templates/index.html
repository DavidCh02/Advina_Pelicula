<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adivina la Película con Emojis</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <!-- Emoji Picker Element (biblioteca) -->
    <script type="module" src="https://cdn.jsdelivr.net/npm/emoji-picker-element@^1/index.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/emoji-picker-element@latest/dist/picker.css">
</head>
<body>
    <div class="container">
        <!-- Pantalla de Registro -->
        <div id="register-screen" class="screen active">
            <h1>Bienvenido al Juego de Emojis</h1>
            <div class="form-group">
                <input type="text" id="username" placeholder="Ingresa tu nombre de usuario">
            </div>
            <button onclick="register()">Comenzar</button>
        </div>

        <!-- Pantalla de Selección de Categoría -->
        <div id="category-screen" class="screen">
            <h1>Elige una Categoría</h1>
            <!-- Nuevo mensaje para informar sobre puntos acumulativos -->
            <div style="text-align: center; margin-bottom: 20px;">
                <strong>Cada vez que escoges una categoría, los puntos serán acumulativos</strong>
            </div>

            <div class="category-buttons">
                <button class="category-button" onclick="selectCategory('accion')">Acción</button>
                <button class="category-button" onclick="selectCategory('animacion')">Animación</button>
                <button class="category-button" onclick="selectCategory('terror')">Terror</button>
                <button class="category-button" onclick="selectCategory('romantica')">Romántica</button>
                <button class="category-button" onclick="selectCategory('comedia')">Comedia</button>
                <button class="category-button" onclick="selectCategory('aleatorio')">Aleatorio</button>
            </div>
        </div>

        <!-- Pantalla de Juego -->
        <div id="game-screen" class="screen">
            <div class="scores">
                <div>Jugador: <span id="player-score">0</span></div>
                <div>IA: <span id="ai-score">0</span></div>
                <div>Ronda: <span id="round-number">1</span>/10</div>
            </div>

            <!-- Nuevo elemento para mostrar la categoría -->
            <div id="category-display" style="text-align: center; margin-bottom: 20px;">
                <strong>Categoría: <span id="current-category">N/A</span></strong>
            </div>

            <div id="player-turn">
                <h2>Tu Turno</h2>
                <div class="emojis" id="movie-emojis"></div>
                <div class="movie-options" id="movie-options"></div>
            </div>

            <!-- Nuevo panel de selección de emojis -->
            <div id="ai-turn" style="display: none;">
                <h2>Turno de la IA</h2>


                <!-- Contenedor del selector de emojis -->
                <div id="emoji-picker-container">
                    <emoji-picker id="emoji-picker"
                                  categories="smileys,people,nature,food,activities,travel,objects,symbols,flags"></emoji-picker>
                </div>

                <!-- Área de vista previa de emojis seleccionados -->
                <div id="selected-emojis" class="selected-emojis-preview"></div>

                <!-- Botón de envío -->
                <button class="emoji-submit-btn" onclick="submitEmojis()">Enviar Emojis</button>

                <!-- Resultado de la IA -->
                <div id="ai-guess-result" class="ai-guess-result"></div>

                <!-- Botones de evaluación -->
                <div class="form-group" id="ai-evaluation" style="display: none;">
                    <button onclick="evaluateAI(true)">Correcto</button>
                    <button onclick="evaluateAI(false)">Incorrecto</button>
                </div>
            </div>
        </div>

        <!-- Pantalla de Resultados -->
        <div id="results-screen" class="screen">
            <h1>Fin del Juego</h1>
            <div class="scores">
                <div>Puntuación Final:</div>
                <div>Jugador: <span id="final-player-score">0</span></div>
                <div>IA: <span id="final-ai-score">0</span></div>
            </div>
            <h2>Tabla de Posiciones</h2>
            <table class="leaderboard">
                <thead>
                    <tr>
                        <th>Jugador</th>
                        <th>Puntos Jugador</th>
                        <th>Puntos IA</th>
                    </tr>
                </thead>
                <tbody id="leaderboard-body"></tbody>
            </table>
            <button onclick="playAgain()">Jugar de Nuevo</button>
        </div>
    </div>

    <!-- Pop-up de Feedback -->
    <div id="feedback-popup" class="popup"></div>

    <!-- Script principal -->
    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>